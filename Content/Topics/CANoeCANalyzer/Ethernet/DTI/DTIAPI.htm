<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="" data-mc-search-type="Stem" data-mc-help-system-file-name="CANoeDEFamily.xml" data-mc-path-to-help-system="../../../../../" data-mc-conditions="Targets.CANoe-DE-Family,Targets.CANoe-SE-Family" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../../../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../../Skins/Favicons/favicon-16x16.png" /><title>DTI API</title>
        <link href="../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Resources/Stylesheets/vTableMasterPageHeader.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link href="../../../../Resources/Stylesheets/vStylesheet.css" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.expand-all-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.button.remove-highlight-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.button.collapse-all-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.needs-pie
{
	behavior: url('../../../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../../../Resources/Stylesheets/vTable.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link href="../../../../Resources/Stylesheets/vTableSymbol.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/foundation.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapGlobal.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapDom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapUtilities.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapXhr.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapTextEffects.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapSlideshow.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapMessageBus.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapMessageBus.CrossFrame.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapDefault.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapMediaQueries.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapAccessibility.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapHelpSystem.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapAliasFile.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapTopicFeedback.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapFeedbackHelper.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapSkinHelper.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapToc.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapToc.Breadcrumbs.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapToc.MiniToc.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapToc.SideMenu.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapIndex.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapGlossary.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapParser.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapSearch.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapNavigateTopics.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapLms.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapELearning.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapTopic.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapFeedback.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapMicroContentComponent.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapSearchHelper.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapTopicElements.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapTriPane.js" type="text/javascript" defer="defer">
        </script>
        <script type="text/jscript" src="../../../../Resources/vScripts/SyntaxHighlighting.js">
        </script>
        <script type="text/jscript" src="../../../../Resources/vScripts/TabSwitch.js">
        </script>
        <script type="text/javascript" src="../../../../Resources/vScripts/Vector.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../../CANoeDEFamily.htm#Topics/CANoeCANalyzer/Ethernet/DTI/DTIAPI.htm">Open topic with navigation</a>
        </p>
        <div class="Body">
            <div role="main" id="mc-main-content">
                <p class="StructurePath">
                    <MadCap:conditionalText data-mc-conditions="Targets.CANalyzer,Targets.CANoe-DE-Family,Targets.CANoe-SE-Family"><a href="../Ethernet.htm" class="StructurePath">Ethernet</a> Â» </MadCap:conditionalText><span class="mc-variable System.Title variable">DTI API</span>
                </p>
                <h1><a name="aanchor18173"></a>
                    <MadCap:concept term="DTIApi" /><a name="kanchor6103"></a><span class="mc-variable System.Title variable">DTI API</span>
                </h1>
                <p class="MenuPath">&#160;</p>
                <p class="ToolAvailability" data-mc-conditions="BuildProcess.ToolAvailability"><a href="../../../Shared/FeatureAvailability.htm" class="red" title="Feature availabilty for your product">Valid&#160;for</a>:&#160;&#160;CANoe&#160;DE<a name="aanchor18174"></a><MadCap:concept term="SFCANoeDE" /></p>
                <p class="AutoSearchFilterConcepts"><a name="aanchor18175"></a>
                    <MadCap:concept term="SFCore" />
                </p>
                <div>
                    <table style="margin-left: 0;margin-right: auto;width: 100%;mc-table-style: url('../../../../Resources/Stylesheets/vTable.css');" class="TableStyle_vTable" cellspacing="0">
                        <col />
                        <col />
                        <thead>
                            <tr>
                                <th colspan="2" class="TableStyle_vTable_Head_0_0_RowSep_ColEnd">
                                    <p class="TableHead">General</p>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="2" class="TableStyle_vTable_Body_0_0_RowSep_ColEnd">
                                    <p>The Deterministic Transfer Interface (DTI) API improves accuracy when dealing with time-sensitive Ethernet packets. The DTI API uses pipes to proactively transfer data to the network interface hardware, ensuring precise transmission at the specified time stamp.</p>
                                    <p>The DTI API is supported by the VN5650 network interface. If you attempt to use this feature on other hardware, it will default to using emulated pipes, which do not enhance precision.</p>
                                    <h2 class="SectionSub">Create DTI Pipe</h2>
                                    <p>A DTI pipe transfers data to the network interface hardware and sends it at the specified time stamp.</p>
                                    <p>To do this, use the CAPL function <a href="../../../CAPLFunctions/DTI/Functions/CAPLfunctionDtiOpen.htm">DtiOpen</a> to create a pipe. You can provide any local simulation port as the first parameter. If a measurement port is provided, this operation will fail. Optionally, provide an <a href="../../../CAPLFunctions/DTI/EventProcedures/CAPLfunctionOnDtiSendCallback.htm">onDtiSendCallback</a> as the second parameter. The function returns a handle that is used in all DTI functions of the DTI API.</p>
                                    <p>Afterwards, you can send packages with <a href="../../../CAPLFunctions/DTI/Functions/CAPLfunctionDtiSend.htm">DtiSend</a>. Provide a valid Ethernet packet and the target time stamp in nanoseconds.</p>
                                    <p>To close the connection, use the function <a href="../../../CAPLFunctions/DTI/Functions/CAPLfunctionDtiClose.htm">DtiClose</a>.</p>
                                    <div>
                                        <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../../../Resources/Stylesheets/vTableSymbol.css');" class="TableStyle-vTableSymbol" cellspacing="0">
                                            <col class="TableStyle-vTableSymbol-Column-Column1" />
                                            <col class="TableStyle-vTableSymbol-Column-Column2" />
                                            <tbody>
                                                <tr>
                                                    <td class="TableStyle-vTableSymbol-BodyB-Column1-">
                                                        <p class="Table">
                                                            <img src="../../../../Resources/vImages/vExample.png" style="width: 48px;height: 45px;" title="Example" alt="Example" />
                                                        </p>
                                                    </td>
                                                    <td class="TableStyle-vTableSymbol-BodyA-Column2-">
                                                        <p class="TableSymbolHead"><a targets="TOGDTIExample" href="javascript:void(0)" class="MCToggler MCTogglerHead MCTogglerHotSpot MCToggler_Open toggler MCTogglerHotSpot_ MCHotSpotImage" data-mc-targets="TOGDTIExample"><img class="MCToggler_Image_Icon" src="../../../../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Example</a>
                                                        </p>
                                                        <div style="display: none;" data-mc-target-name="TOGDTIExample">
                                                            <p class="TableSourceCode">variables<br />{<br />&#160;&#160;<span class="CodeComment">// error codes:</span><br />&#160;&#160;<span class="CodeKeyword">const long</span> SUCCESS =  0;<br />&#160;&#160;<span class="CodeKeyword">const long</span> FAILURE = -1;<br />&#160;&#160;<span class="CodeKeyword">const long</span> PENDING =  1;<br /><br />&#160;&#160;<span class="CodeComment">// pipe handle</span><br />&#160;&#160;<span class="CodeKeyword">dword</span> pipe;<br />}<br /><br /><span class="CodeComment">//<br />// open a dti pipe<br />//</span><br /><span class="CodeKeyword">on start</span><br />{<br />&#160;&#160;<span class="CodeKeyword">stack ethernetPort</span> port = lookupEthernetPort(<span class="CodeStringLiteral">"Ethernet1::ECU_1"</span>);<br /><span class="CodeComment">&#160;&#160;// optionally provide a callback which is called when the pending packet was sent<br />&#160;&#160;// and the pipe is ready to be used again</span><br />&#160;&#160;pipe = DtiOpen(port, <span class="CodeKeyword">delegate</span>(<span class="CodeKeyword">dword</span> p, <span class="CodeKeyword">long</span> r)<br />&#160;&#160;{<br />&#160;&#160;&#160;&#160;<span class="CodeKeyword">if</span> (r == SUCCESS)<br />&#160;&#160;&#160;&#160;&#160;&#160;write(<span class="CodeStringLiteral">"Pipe is ready!"</span>);<br />&#160;&#160;});<br />}<br /><br /><span class="CodeComment">//<br />// send packet<br />//</span><br /><span class="CodeKeyword">on key</span> <span class="CodeStringLiteral">'s'</span><br />{<br />&#160;&#160;<span class="CodeKeyword">ethernetPacket</span> eth;<br />&#160;&#160;<span class="CodeKeyword">int64</span> timeNs;<br />&#160;&#160;<span class="CodeKeyword">long</span> result;<br /><br />&#160;&#160;<span class="CodeKeyword">if</span> (pipe == 0)<br />&#160;&#160;{<br />&#160;&#160;&#160;&#160;write (<span class="CodeStringLiteral">"Invalid pipe handle!"</span>);<br />&#160;&#160;&#160;&#160;<span class="CodeKeyword">return</span>;<br />&#160;&#160;}<br /><br />&#160;&#160;timeNs = eth.time_ns + 10000000000LL;<br /><br />&#160;&#160;result = DtiSend(pipe, eth, timeNs);<br /><br />&#160;&#160;<span class="CodeKeyword">if</span> (result == SUCCESS)<br />&#160;&#160;&#160;&#160;write(<span class="CodeStringLiteral">"Packet was send!"</span>);<br />&#160;&#160;<span class="CodeKeyword">else if</span> (result == FAILURE)<br />&#160;&#160;&#160;&#160;write(<span class="CodeStringLiteral">"Failed to send packet"</span>);<br />&#160;&#160;<span class="CodeKeyword">else if</span> (result == PENDING)<br />&#160;&#160;&#160;&#160;write(<span class="CodeStringLiteral">"Pipe is full. Packet is pending!"</span>);<br />}<br /><br /><span class="CodeComment">//<br />// clean up dti pipes on measurement end<br />//</span><br /><span class="CodeKeyword">on preStop</span><br />{<br />&#160;&#160;<span class="CodeKeyword">stack long</span> result = DtiClose(pipe);<br />&#160;&#160;<span class="CodeKeyword">if</span> (result != SUCCESS)<br />&#160;&#160;&#160;&#160;write(<span class="CodeStringLiteral">"Failed to close pipe!"</span>);<br />}</p>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <p>&#160;</p>
                                </td>
                            </tr>
                            <tr>
                                <th colspan="2" class="TableStyle_vTable_Body_0_0_RowSep_ColEnd">
                                    <p class="TableHead">Topics Overview</p>
                                </th>
                            </tr>
                            <tr data-mc-conditions="">
                                <td class="TableStyle_vTable_Body_0_0_RowEnd_ColSep">
                                    <p class="Table"><a href="../../../CAPLFunctions/DTI/CAPLfunctionsDTIOverview.htm">DTI CAPL Functions</a>
                                    </p>
                                </td>
                                <td class="TableStyle_vTable_Body_0_0_RowEnd_ColEnd">
                                    <p class="Table">On this page you find an overview of all DTI CAPL functions.</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="LinkList">&#160;</p>
            </div>
        </div>
        <div class="Footer">
            <div class="FooterWhite">
                <table class="FooterWhite" style="border-collapse: collapse;margin-left: auto;margin-right: auto;">
                    <col style="width: 70px;" data-mc-conditions="BuildProcess.HTML5Link" />
                    <col style="width: 16px;" data-mc-conditions="BuildProcess.HTML5Link" />
                    <col />
                    <tbody>
                        <tr>
                            <td>
                                <div class="buttons popup-container clearfix topicToolbarProxy topicToolbarProxyFooter _Skins_HTML5TopicToolbar mc-component nocontent">
                                    <div class="button-group-container-left">
                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                            <div>
                                                <div role="img" class="button-icon-wrapper" aria-label="Expand all">
                                                    <div class="button-icon"> </div>
                                                </div>
                                            </div>
                                        </button>
                                        <button class="button needs-pie remove-highlight-button" title="Remove Highlights">
                                            <div>
                                                <div role="img" class="button-icon-wrapper">
                                                    <div class="button-icon"> </div>
                                                </div>
                                            </div>
                                        </button>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <p class="vec_BuildInfo"><a href="../../../Shared/HowToUseOnlineHelp.htm" title="Tips for using the help" alt="Tips for using the help"><img src="../../../../Resources/vImages/vBackstage/vHelpInfo.png" /></a>
                                </p>
                            </td>
                            <td>
                                <p class="vec_BuildInfo" style="text-align: right;"><span class="mc-variable Vector.BuildTime variable">2024-04-8T20:56:42</span>
                                </p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <table style="width: 100%;border-collapse: separate;border-spacing: 3px 0px;margin-left: auto;margin-right: auto;caption-side: top;">
                <col />
                <col />
                <col />
                <col data-mc-conditions="BuildProcess.HTML5Link" />
                <tbody>
                    <tr>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 5pt;">
                            <p class="vec_Footer">Â©&#160;Vector Informatik GmbH</p>
                        </td>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 5pt;text-align: right;">
                            <p class="vec_FooterBold">
                                <MadCap:conditionalText data-mc-conditions="Targets.CANoe-DE-Family">CANoe&#160;DE&#160;Product Families</MadCap:conditionalText> Version <MadCap:conditionalText data-mc-conditions="Targets.CANalyzer,Targets.CANoe-DE-Family,Targets.CANoe-SE-Family,Targets.VectorTestUnitRunner">18</MadCap:conditionalText></p>
                        </td>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 0pt;text-align: right;">
                            <p class="vec_Footer"><a href="../../../Shared/ContactCopyrightLicense.htm" class="vec_Footer MCXref xref xrefvec_Footer">Contact/Copyright/License</a>
                            </p>
                        </td>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 0pt;text-align: right;">
                            <p class="vec_Footer"><a href="https://www.vector.com/int/en/company/get-info/privacy-policy/" target="_blank" class="vec_Footer">Data Privacy Notice</a>
                            </p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </body>
</html>